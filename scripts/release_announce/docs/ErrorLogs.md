# エラーログ記録

## 概要
Slackリリース通知のNotion朝会議事録への自動投稿実行時に発生したエラーとその原因、修正内容を記録します。

---

## ⚠️ 運用ルール（必須遵守）

### エラー発生時の記録義務
**エラーが発生した場合は、必ずこのドキュメントに以下を記録してください：**

1. **エラー概要**
   - 発生時刻
   - 対象処理（Slack投稿取得、Notionページ検索等）
   - エラーコード
   - 影響範囲

2. **エラー詳細**
   - エラーログ（GASログからの抜粋）
   - 関連設定値（チャンネルID、データベースID等）

3. **原因分析**
   - エラーの性質（HTTPステータス、レスポンスボディ等）
   - 根本原因
   - 現在のコードの対応状況

4. **影響範囲**
   - どの処理に影響したか
   - 他の処理への影響はあるか

5. **暫定対応**
   - 発生時の暫定対応内容

6. **修正内容**（修正後）
   - 修正方針
   - 実装内容
   - 修正後の動作確認結果

### 記録フォーマット
各エラーは以下のフォーマットで記録してください：
```markdown
## YYYY/MM/DD HH:MM:SS - エラー名

### エラー概要
- **発生時刻**: [時刻]
- **対象処理**: [処理名]
- **エラーコード**: [コード]
- **影響範囲**: [影響の説明]

### エラー詳細
...

### 原因分析
...

### 影響範囲
...

### 暫定対応
...

### 修正内容
...
```

### 修正時は必ず更新
- エラーを修正した際は、該当エラーの「修正予定」セクションを「修正内容」に更新
- 「修正履歴」セクションに修正日時を追記
- コード変更と同時にドキュメントも更新すること

---

## エラー分類

### Slack API関連エラー

#### access_denied
- **意味**: ボットがチャンネルへのアクセス権限を持っていない
- **HTTPステータス**: 403
- **対応**: チャンネルへのアクセス権限を付与する必要がある

#### channel_not_found
- **意味**: 指定されたチャンネルIDが存在しない
- **HTTPステータス**: 200（`ok: false`）
- **対応**: チャンネルIDの確認・修正が必要

#### rate_limited
- **意味**: APIレート制限に達した
- **HTTPステータス**: 429
- **対応**: リトライ間隔を調整、リトライロジックの追加

---

### Notion API関連エラー

#### object_not_found
- **意味**: 指定されたページやデータベースが見つからない
- **HTTPステータス**: 404
- **対応**: ページIDやデータベースIDの確認が必要

#### unauthorized
- **意味**: 認証トークンが無効、または権限が不足している
- **HTTPステータス**: 401
- **対応**: APIトークンの確認、権限設定の確認

#### validation_error
- **意味**: リクエストのパラメータが不正
- **HTTPステータス**: 400
- **対応**: リクエストパラメータの形式を確認

---

## 修正履歴
- 2025-01-29: 初版作成

